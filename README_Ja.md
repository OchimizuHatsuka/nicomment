# Nicomment

[**中文简体**](./README.md) | [**日本语**](./README_Ja.md)

日本人ではないので、不自然また間違い表現があるかもしれませんがご了承ください。日本語テキストを改善するためのPull Requestも歓迎します。

Nicommentは[ニコニコ動画](http://www.nicovideo.jp)のコメントをダウンロードするツールです。Electron + MaterialUI + TypeScriptで開発しました。[NicomentXenoglossia](http://xeno.grrr.jp)の作者様がすでにメンテナンスされなくなり、ほかにも楽にニコ動のコメントを取れる方法がないようで、このツールを作りました。

## 使い方

まずこのツールを使ってコメントのダウンロードを行ってください。ダウンロードしたコメントデータはxmlファイルとして指定している位置に保存します。次に[danmaku2ass](https://github.com/m13253/danmaku2ass)などのass字幕ファイルに変換するツールを使って字幕ファイルに変換して、これでファイルの処理が終わりました。再生するには先ほどできたass拡張子の字幕ファイルをプレーヤーに読み込ませてニコ動のように動画といっしょに流れていたら完成です。使うプレーヤーソフトはwindowsでは(MPC-HC)[https://mpc-hc.org]（パソコンでこれしか使ったことないが）、AndroidではMX PlayerとX Playerがおすすめです。個人的にいろいろ使ってみた結果によると、これらのプレーヤーにはass字幕の特殊効果（変形や座標移動など）の対応が比較的に良くて、パフォーマンスもわりと優れたほうなのですから、今お使いのプレーヤーがass字幕ファイルのコメントを再生する時に何か支障や不具合があったらこれらのプレーヤーを使ったほうがいいです。

ちなみに、上記のプレーヤーソフトは最適化をするため、すこし設定する必要があります。具体的な操作はこちらです：
* MX Playerの場合：
  * 再生画面の右上に2番目のボタンをクリックする。そこで表示されたメニューで下の「カスタム」をクリックしてから、下にスライドして「高度設定」をクリックし、下の「SSA字幕のレンダリングを改善する」と「複雑スクリプトのレンダリングを改善する」をオンにする
  * 再生画面の右上に3番目のボタンをクリックして、ソフトウェアデコーダーを選ぶ
* X Playerの場合：
  * 再生画面の一番右上のボタンをクリックしいて、そこで表示されたメニューでデコーダーの項目の下にハードウェアデコーダーを選ぶ

日本語の端末を持っていなくて、中国語のUI文字をそのまま翻訳したため、日本語のUI文字と違うかもしれません。

端末のスペックによってコメントか画面また音声の遅延が発生する場合があります。

## 注意事項

* ニコ動をアクセス可能かつ公式チャンネルアニメを視聴できるネット環境で実行してください。VPNを使う場合は、確実の「グローバルプロキシ」の状態かどうかをチェックしてください。ブラウザでしかアクセスできない状態はグローバルプロキシではありません。プロキシサーバーを使う場合は「プロキシ設定」でサーバーのURLなどの情報を記入してから使ってください。チャンネルアニメを視聴できないのは、使っているVPNまたプロキシサービスはネイティブの日本IPではない可能性があります。
* 当ソフトでログインした後、たまにブラウザでのログイン状態がオフラインになります。短時間の間に頻繁にログインするとアカウントがロックされる恐れがありますのでご注意ください。ロックされる場合は、ブラウザでニコ動にアクセスし、ヒントに従ってパスワードをリセットすればロック状態が解除できるのです。**アカウントに対する他に影響のないことは保証できません**
* 当ソフトはアカウントとパスワードを含めて個人情報を収集することは一切行いません。
* 最近ニコニコが非公式サイトのログインをチェックし始めました。当ソフトを利用した後、公式サイトにアクセスする時にページの上では「他社流出パスワードを用いた不正ログインについて」のような赤いメッセージが表示されることがありますが、ご心配は要りません。


## TODO

* 歴史コメントのダウンロード
* コメントファイル処理(NicomentXenoglossiaの再構成という機能と同じ)
* コメントファイルをass字幕ファイルに変換する機能
* 動画のダウンロード

